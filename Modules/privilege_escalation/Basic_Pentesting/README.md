# Project Name: Bassic Pentesting

Tasks:
Brute forcing
hash cracking
service enumeration
linux enumeration

Main goal learn as much as posible!!!

# info

IP: 10.48.184.22

# Scanning

Open Ports:
22 - SSH
80 - Server  apatche httpd 2.4.41
139 - netbios-ssh samba 4
445 - netbios-ssh samba 4
8000 - ajp13 - apache server
8080 - web sajt - apatche Tomcat 9.0.7



# Questions & Answers
* Skriveni direktorij na serveru ('development', nadjen pomocu Gobuster-a)
* username ('jan' i 'kay' nadjeni pomocu alata enum4linux
* Password ('jay:armando' nadjeni pomocu hydra sa HHS)

# Founded Credentials
'jay:armando'


# Walktrow

Nmap Scaning:

mkdir nmap    - ovo kreira direktorijum nmap/ u kom cemo cuvati rezultate

nmap -sC -sV -oN nmap/initial - skeniramo i te rezultate sacuvamo i fajl initial


Posto imamo otvoren port 80, a to je sajt, mozemo da ga pogledamo mozda ima nesto zanimljivo.

Undergoing maintenance - je poruka, sajt u izgradnji, ali Inspekcijom koda
Sajta dolazim do poruke da pogledam dev beleske u njihovoj sekciji.

pogli bi probati mozda u URL upisati /dev

nije nadjeno, ali imamo info da se radi o Apache 2.4.41 serveru ubuntu

Tako da bi mogli da prelistamo linkovo i mozda nadjemo neke korisne 
Enumeracije linkova. za to nam treba gobuster ili slicni alati.


gobuster -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt -u http://10.48.184.22


mala greska nedostaje dir komanda, kaja je dodata u novijoj verziji gobustera, oredjuje mu nacin enumeracije.

gobuster dir -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt -u http://10.48.184.22


Mozemo odma da vidimo da je nasao nesta
/Development  - da vidimo sta ima na sajtu

Nasli smo dva fajla
dev.txt
j.txt

Neko od njih pravi privanu app, na samba serveru, i podesili su 
/etc/shadow - fajl na serveru koji sprecava odredjene ljude pristupu 
takodje da je koristion verziju 2.5.12 , verovatno apache
Takodje dva korisnika jedan je J drugi K


No kod ovo radi svoje, posto znamo da imamo otvoren port 445, mozemo da odradimo jos jednu enumeraciju, u drugom terminali.

/usr/share/enum4linux/enum4linux.pl -a 10.48.184.22 | tee enum4linux.log


u analizi smo otkrili da postoje useri - Jan i Kay
tako da sada mozemo da probamo da probijemo sifru pomocu hydre ili nekog drugog alata.

hydra -l jan -P /opt/wordlist/rockyou.txt ssh://10.48.179.97

posle nekog vremena uspeli smo da probijemo lozinku, korisnik Jay ima lozinku armando

Opservacija, ima ime Jay u dokumentu na serveru, ali korisnik racunara je Jan

sada bismo trebali da mozemo da se ulogujemo u Jay-jev nalog

ssh jan@10.48.179.97

unesemo onda sifru armando, koja se ne vidi da je upisana ali tu je.


uspesno smo se logovali

malo gledanja unaokolo mozemo videti da postoji user kay, jan, ubuntu,

ako idemo nazad i udjemo u kay dir, mozemo naci fajl pass.bac
sto predstavlja backup lozinke ali nam je zabrtanjen pristup

da bismo pristupili potrebno je da izvrsimo privilegy excalation
dobar nacin je da upotrebimo gotovu skriptu 

ako probamo da pogledamo i bilo kakve fajlove, imamo premission Denied

Kao ni /etc/shadow 

To je u Jay i sistem dir. a u Kay-jev direktorij nadjen je fajl.
pass.bak - koji treba da sadrzi bqckup sa sifrom korisnika.
kao i neke skrivene fajlove, .viminfo, .ssh, 


Ono sto bismo sada trebali da uradiomo je na nadjemo nacin privilegovane exkalacije,tj da postanemo administrator ili kako se to kaze u linuxu rook korisnik. To se moze obavljati rucno pretrazivati koje sve prigrame imamo u sistemu,pa testirati koje opcije mozemo sa njima koristiti, tragajuci za neku vrstu propusta gde bismo mogli koristiti admin mogucnosti ili shell kodove, te ih onda pokrenuti da se prebacimo exkaliramo kao rook korisnik iliti administrator.


Sva sreca pa u dosla slucajeva ne moramo da se toliko mucimo, jer imamo gotove skripte ili alate za automatizaciju skeniranja takvih propusta, jetan takav dobar alat je limPEAS

link:
https://github.com/peass-ng/PEASS-ng/tree/master/linPEAS

Prvo da bi nam stvari bile uredne u racunaru, ovu skriptu i sve takve buduce alate drzimo ih na jednom mestu.

u root  /opt/linPEAS/linpeas.sh - mozsa ce vam trebato root access, koristiti direktory open as Root ili koristite sudo u comandnoj liniji za prenos ili kopiranje preuzetog fajla.


e sad mozemo da prebacimo ovaj fajl na server kod Jay-a i sa njihovog racunara pokrenuti skriptu.

scp /opt/linPEAS/linpeas.sh jan@10.48.175.92:/dev/shm

e sad da ga napravimo da je skripta izvrsna
chmod +x linpeas.sh

Ovaj program ce nam dati izuzetno puno informacije o raznim nacinima, moze se reci propustima koje mozemo upotrebiti da izvrsimo privilegy excalaciju. i plus nam je sve lepe predstavljeno lepim koloritom, zeleno je normalno, zuro valja pogledati, a crveno sigurno moze da se iskoristi za exkaliranje.

kakodje je jako pametno sacuvati rezultate u fajl, pomocu recimo tee, da imamo laksi pregled kasnije.

./linpeas.sh | tee linlog.txt


Moze se naci jako puno interesantnih stvari, recimo da na sistemu imamo perl i nekoliko python-a, onda da ima port 8005 je otvoren
roo /bin/bash - je shell koji mozemo da iskoristimo
samba ima guest nalog, mozemo da pristupimo

nasao je i prikazao nam Kay-jev privatni kljuc za SSH, koji mozemo da sacuvamo i iskoristimo

kay-id-rsa

chmod 600 kay-id-rsa   - da kreiramo za je citljiv samo nama, tako se podesava fajl za ssh key

ssh -i kay-id-rsa kay@10.48.175.92

Prazi nam prazu, a sa tim na umu mogli bismo sa koristimo johnthe rypper za generisanje te phrase koja je u sustini sifra korisnika.


/opt/JohnTheRipper/run/ssh2john.py kay-id-rssa > forjohn.txt

/opt/JohnTheRipper/run/john forjohn.txt --wordlist=/opt/rockyou.txt

tako da je ovime nas drugaj John nasao sifru za Kay-a
beeswax 

ssh -i kay@10.48.175.92

unesemo passphrase beeswax - i sada smo kay korisnik, ura.


ls
ivde imamo onaj pass.back fajl koji sad mozemo da vidimo jer ga posedujemo i to je zajnji deo izazova, nasli smo zadnju sifru.

heresareallystrongpasswordthatfollowsthepasswordpolicy$$



pitanja i odgovori

What is the name of the hidden directory on the web server(enter name without /)?
development

User brute-forcing to find the username & password
What is the username?
jan
What is the password?
armando

What service do you use to access the server(answer in abbreviation in all caps)?
SSH

Enumerate the machine to find any vectors for privilege escalation
What is the name of the other user you found(all lower case)?
kay

What is the final password you obtain?
heresareallystrongpasswordthatfollowsthepasswordpolicy$$





















